## 1. 项目概述

本项目是一个类似飞书（Lark）任务功能的TodoList应用，支持多用户团队协作的任务管理系统。用户可以创建、分配、跟踪任务，支持子任务、评论、历史记录等完整功能，帮助团队高效协作完成任务。

目标用户：需要任务管理和团队协作的个人用户、小型团队、项目组。

## 2. 技术栈

- **前端**：TypeScript + React 18
- **后端**：TypeScript + Nest.js
- **数据库**：PostgreSQL（推荐）或其他关系型数据库
- **部署**：Docker + Dockerfile
- **API文档**：需要实现完整的API文档

## 3. 核心功能

### 3.1 用户认证
- 用户注册（邮箱注册）
- 用户登录
- 用户权限管理

### 3.2 团队管理
- 创建团队
- 邀请成员加入团队
- 团队成员管理

### 3.3 任务管理
- **任务CRUD**：创建、读取、更新、删除任务
- **任务分配**：创建后可指派执行人和关注人
- **个人视图**：
  - 我的任务（我创建的任务）
  - 分配给我的任务（我作为执行人的任务）
  - 我关注的任务
- **子任务**：
  - 支持多级子任务，子任务结构与主任务相同
  - 当所有子任务完成后，主任务自动完成
- **任务历史**：显示任务的所有变更历史
- **评论功能**：在历史记录中可以添加评论

### 3.4 筛选与排序
- **筛选**：按时间段、创建人、执行人筛选
- **排序**：按创建时间、计划完成时间、创建者、ID排序

## 4. 扩展功能设计（Schema & 流程）

### 4.1 任务到期提醒
**Schema设计**：
- 在任务表中添加提醒时间字段（reminder_time）
- 创建通知表（notifications）存储提醒记录
- 用户表添加通知偏好设置

**流程设计**：
- 使用定时任务（Cron Job）每天扫描即将到期的任务
- 通过WebSocket或邮件发送提醒通知
- 支持用户自定义提醒时间（提前1天、3天、1周等）

### 4.2 定时重复任务
**Schema设计**：
- 任务表添加重复规则字段（recurrence_rule）
- 使用RRULE格式存储重复规则
- 创建重复任务实例表（task_instances）记录每次生成的任务

**流程设计**：
- 使用定时任务解析重复规则
- 根据规则自动生成新的任务实例
- 支持每日、每周、每月、每年重复
- 可设置重复结束条件（指定日期或重复次数）

## 5. 页面设计

### 5.1 主要页面
1. **登录/注册页**：用户认证入口
2. **任务列表页**：
   - 顶部导航栏（切换不同视图）
   - 筛选和排序控件
   - 任务卡片列表
   - 创建任务按钮
3. **任务详情页**：
   - 任务基本信息
   - 执行人和关注人
   - 子任务列表
   - 历史记录和评论
   - 编辑功能

### 5.2 UI设计原则
- **设计风格**：简洁现代，类似飞书的清爽风格
- **主色调**：蓝色系（#1890ff）为主，灰色系为辅
- **布局**：卡片式布局，响应式设计
- **交互**：流畅的动画效果，友好的操作反馈

## 6. 非功能性需求

### 6.1 性能要求
- 页面加载时间 < 2秒
- API响应时间 < 500ms
- 支持并发用户 > 100

### 6.2 安全要求
- 用户密码加密存储
- API接口权限验证
- SQL注入防护
- XSS攻击防护

### 6.3 部署要求
- 提供完整的Dockerfile
- 数据库支持Docker部署
- 支持环境变量配置
- 提供部署文档

### 6.4 文档要求
- 完整的API文档（Swagger/OpenAPI）
- 数据库设计文档
- 部署说明文档
- 用户操作手册